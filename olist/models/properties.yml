version: 2

models:
  - name: STG_customers
    config:
      schema: staging
    columns:
      - name: customer_id
        tests:
          - not_null
          - unique
      - name: customer_unique_id
        tests:
          - not_null

  - name: STG_geolocation
    config:
      schema: staging
      materialized: view
    columns:
      - name: latitude
        tests:
          - not_null
      - name: longitude
        tests:
          - not_null


  - name: STG_order_items
    columns:
      - name: order_id
        tests:
          - not_null
      
      - name: order_item_id
        tests:
          - not_null

      - name: product_id
        tests:
          - not_null
      
      - name: seller_id
        tests:
          - not_null

    
    
  - name: STG_order_payments
    columns:
      - name: order_id
        tests:
          - not_null

      

  - name: STG_order_reviews
    columns:
      - name: review_id
        tests:
          - not_null

      - name: order_id
        tests:
          - not_null

  - name: STG_orders
    config:
      schema: staging
      materialized: view
    columns:
      - name: order_id
        tests:
            - not_null
            - unique
      - name: customer_id
        tests:
            - not_null
    
      - name: order_status
        tests:
            - accepted_values:
                arguments:
                    values: ['delivered', 'approved','canceled', 'shipped', 'invoiced', 'processing','unavailable','created']
            


  - name: STG_products
    columns:
      - name: product_id
        tests:
          - not_null
          - unique


  - name: STG_sellers
    columns:
      - name: seller_id
        tests:
          - not_null
          - unique